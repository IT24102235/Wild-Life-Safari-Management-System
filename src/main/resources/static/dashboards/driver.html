<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Driver Dashboard - Ranweli Safari</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/main.css">
    <style>
        .dashboard {
            display: flex;
            min-height: 100vh;
            background: #f8f9fa;
        }

        .sidebar {
            width: 280px;
            background: white;
            box-shadow: 2px 0 10px rgba(0,0,0,0.1);
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            z-index: 1000;
        }

        .sidebar-header {
            padding: 2rem;
            border-bottom: 1px solid #eee;
            text-align: center;
            background: linear-gradient(135deg, #d4a574 0%, #2c5530 100%);
            color: white;
        }

        .driver-badge {
            background: #17a2b8;
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-top: 0.5rem;
            display: inline-block;
        }

        .performance-card {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 1rem;
            margin-top: 1rem;
            text-align: center;
        }

        .performance-number {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .performance-label {
            font-size: 0.8rem;
            opacity: 0.9;
        }

        .sidebar-menu {
            padding: 1rem 0;
        }

        .menu-item {
            display: flex;
            align-items: center;
            padding: 1rem 2rem;
            color: var(--text-color);
            text-decoration: none;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }

        .menu-item:hover,
        .menu-item.active {
            background: #f8f9fa;
            border-left-color: var(--primary-color);
            color: var(--primary-color);
        }

        .menu-icon {
            margin-right: 1rem;
            font-size: 1.2rem;
        }

        .main-content {
            flex: 1;
            margin-left: 280px;
            padding: 2rem;
        }

        .driver-header {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
        }

        .welcome-text h1 {
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }

        .dashboard-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .stat-card {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: var(--shadow);
            text-align: center;
            transition: transform 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(135deg, #d4a574 0%, #2c5530 100%);
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }

        .stat-label {
            color: var(--text-light);
            font-weight: 500;
        }

        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
        }

        .trip-card {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 1.5rem;
            box-shadow: var(--shadow);
            transition: transform 0.3s ease;
            border-left: 5px solid var(--accent-color);
        }

        .trip-card:hover {
            transform: translateY(-3px);
        }

        .trip-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .trip-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 1rem 0;
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .detail-icon {
            color: var(--primary-color);
        }

        .trip-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .vehicle-info {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
        }

        .vehicle-card {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border-left: 4px solid var(--accent-color);
        }

        .vehicle-status {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-left: 1rem;
        }

        .status-operational {
            background: #d4edda;
            color: #155724;
        }

        .status-maintenance {
            background: #fff3cd;
            color: #856404;
        }

        .status-repair {
            background: #f8d7da;
            color: #721c24;
        }

        .maintenance-log {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: var(--shadow);
        }

        .log-entry {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem;
            border-bottom: 1px solid #eee;
        }

        .log-entry:last-child {
            border-bottom: none;
        }

        .log-date {
            font-weight: 600;
            color: var(--primary-color);
        }

        .feedback-summary {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
        }

        .feedback-item {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            border-left: 4px solid var(--secondary-color);
        }

        .feedback-rating {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin: 1rem 0;
        }

        .rating-display {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .rating-stars {
            display: flex;
            gap: 0.2rem;
        }

        .rating-star {
            color: #ffd700;
            font-size: 1.2rem;
        }

        .profile-form {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            box-shadow: var(--shadow);
        }

        .form-section {
            margin-bottom: 2rem;
        }

        .form-section h3 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            border-bottom: 2px solid #eee;
            padding-bottom: 0.5rem;
        }

        .license-info {
            background: #e3f2fd;
            border-radius: 10px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .emergency-contact {
            background: #ffebee;
            border-radius: 10px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }

            .sidebar.active {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
                padding: 1rem;
            }

            .dashboard-stats {
                grid-template-columns: 1fr;
            }

            .trip-details {
                grid-template-columns: 1fr;
            }

            .trip-actions {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard">
        <!-- Mobile Menu Toggle -->
        <button class="mobile-menu-toggle" onclick="toggleSidebar()" style="display: none; position: fixed; top: 1rem; left: 1rem; z-index: 1001; background: var(--primary-color); color: white; border: none; padding: 0.75rem; border-radius: 8px; cursor: pointer;">☰</button>

        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h3 id="driverName">Nimal Silva</h3>
                <div class="driver-badge">SAFARI DRIVER</div>
                <div class="performance-card">
                    <div class="performance-number" id="driverRating">4.6</div>
                    <div class="performance-label">Average Rating</div>
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 1rem;">
                    <div style="text-align: center;">
                        <div class="performance-number" id="totalTrips">203</div>
                        <div class="performance-label">Total Trips</div>
                    </div>
                    <div style="text-align: center;">
                        <div class="performance-number" id="safetyRecord">100%</div>
                        <div class="performance-label">Safety Record</div>
                    </div>
                </div>
            </div>

            <nav class="sidebar-menu">
                <a href="#" class="menu-item active" data-section="overview">
                    <span class="menu-icon">📊</span>
                    Overview
                </a>
                <a href="#" class="menu-item" data-section="trips">
                    <span class="menu-icon">🚗</span>
                    My Trips
                </a>
                <a href="#" class="menu-item" data-section="vehicle">
                    <span class="menu-icon">🔧</span>
                    Vehicle Status
                </a>
                <a href="#" class="menu-item" data-section="maintenance">
                    <span class="menu-icon">⚙️</span>
                    Maintenance Log
                </a>
                <a href="#" class="menu-item" data-section="feedback">
                    <span class="menu-icon">⭐</span>
                    My Feedback
                </a>
                <a href="#" class="menu-item" data-section="profile">
                    <span class="menu-icon">👤</span>
                    Profile
                </a>
            </nav>

            <div style="padding: 2rem;">
                <button class="logout-btn" style="background: #dc3545; color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 8px; cursor: pointer; width: 100%;" onclick="logout()">
                    🚪 Logout
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Overview Section -->
            <section class="content-section active" id="overview">
                <div class="driver-header">
                    <div class="welcome-text">
                        <h1>Welcome back, <span id="welcomeName">Nimal</span>!</h1>
                        <p>Ready to drive today's safari adventures? Here's your overview.</p>
                    </div>
                </div>

                <div class="dashboard-stats">
                    <div class="stat-card">
                        <div class="stat-icon">🚗</div>
                        <div class="stat-number" id="todaysTrips">2</div>
                        <div class="stat-label">Today's Trips</div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon">📊</div>
                        <div class="stat-number" id="weeklyTrips">7</div>
                        <div class="stat-label">This Week</div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon">⭐</div>
                        <div class="stat-number" id="recentRating">4.8</div>
                        <div class="stat-label">Recent Rating</div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon">🛡️</div>
                        <div class="stat-number" id="safetyDays">365</div>
                        <div class="stat-label">Days No Incidents</div>
                    </div>
                </div>

                <div class="section-header">
                    <h2 class="section-title">Today's Trips</h2>
                </div>

                <div id="todaysTripsList">
                    <!-- Today's trips will be loaded here -->
                </div>

                <!-- Vehicle Status Overview -->
                <div class="vehicle-info">
                    <h3 style="color: var(--primary-color); margin-bottom: 1.5rem;">My Vehicle Status</h3>
                    <div class="vehicle-card">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                            <h4>Toyota Land Cruiser - LB-1234</h4>
                            <span class="vehicle-status status-operational">Operational</span>
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem;">
                            <div>
                                <strong>Fuel Level:</strong><br>
                                <div style="background: #e0e0e0; height: 10px; border-radius: 5px; margin-top: 0.5rem;">
                                    <div style="background: #28a745; height: 100%; width: 85%; border-radius: 5px;"></div>
                                </div>
                                <small>85%</small>
                            </div>
                            <div>
                                <strong>Last Service:</strong><br>
                                <span style="color: var(--text-light);">Dec 15, 2024</span>
                            </div>
                            <div>
                                <strong>Next Service:</strong><br>
                                <span style="color: var(--accent-color);">Feb 15, 2025</span>
                            </div>
                            <div>
                                <strong>Mileage:</strong><br>
                                <span style="color: var(--text-light);">45,678 km</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Trips Section -->
            <section class="content-section" id="trips">
                <div class="section-header">
                    <h2 class="section-title">My Safari Trips</h2>
                    <div class="filter-buttons">
                        <button class="filter-btn active" data-filter="all">All</button>
                        <button class="filter-btn" data-filter="upcoming">Upcoming</button>
                        <button class="filter-btn" data-filter="completed">Completed</button>
                        <button class="filter-btn" data-filter="cancelled">Cancelled</button>
                    </div>
                </div>

                <div id="allTrips">
                    <!-- All trips will be loaded here -->
                </div>
            </section>

            <!-- Vehicle Section -->
            <section class="content-section" id="vehicle">
                <div class="section-header">
                    <h2 class="section-title">Vehicle Management</h2>
                    <div>
                        <button class="btn btn-outline" onclick="reportIssue()">Report Issue</button>
                        <button class="btn btn-primary" onclick="requestMaintenance()">Request Maintenance</button>
                    </div>
                </div>

                <div class="vehicle-info">
                    <h3 style="color: var(--primary-color); margin-bottom: 1.5rem;">Vehicle Details</h3>

                    <div class="vehicle-card">
                        <h4 style="margin-bottom: 1rem;">Toyota Land Cruiser Prado - LB-1234</h4>

                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 2rem;">
                            <div>
                                <h5 style="color: var(--primary-color); margin-bottom: 1rem;">Vehicle Info</h5>
                                <p><strong>Year:</strong> 2020</p>
                                <p><strong>Engine:</strong> 3.0L Diesel</p>
                                <p><strong>Capacity:</strong> 8 passengers</p>
                                <p><strong>Registration:</strong> LB-1234</p>
                                <p><strong>Insurance:</strong> Valid until Dec 2025</p>
                            </div>

                            <div>
                                <h5 style="color: var(--primary-color); margin-bottom: 1rem;">Current Status</h5>
                                <p><strong>Fuel Level:</strong> 85% (68L)</p>
                                <p><strong>Engine Oil:</strong> Good</p>
                                <p><strong>Tire Condition:</strong> Excellent</p>
                                <p><strong>Last Inspection:</strong> Jan 1, 2025</p>
                                <p><strong>Next Service Due:</strong> Feb 15, 2025</p>
                            </div>

                            <div>
                                <h5 style="color: var(--primary-color); margin-bottom: 1rem;">Equipment</h5>
                                <p>✅ First Aid Kit</p>
                                <p>✅ Fire Extinguisher</p>
                                <p>✅ Spare Tire</p>
                                <p>✅ Tool Kit</p>
                                <p>✅ GPS Navigation</p>
                                <p>✅ Radio Communication</p>
                            </div>
                        </div>

                        <div style="margin-top: 2rem; padding-top: 2rem; border-top: 1px solid #eee;">
                            <h5 style="color: var(--primary-color); margin-bottom: 1rem;">Recent Issues</h5>
                            <div style="color: var(--text-light);">
                                <p>✅ All systems operational</p>
                                <p>ℹ️ No recent issues reported</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Maintenance Section -->
            <section class="content-section" id="maintenance">
                <div class="section-header">
                    <h2 class="section-title">Maintenance Log</h2>
                    <button class="btn btn-primary" onclick="addMaintenanceEntry()">Add Entry</button>
                </div>

                <div class="maintenance-log">
                    <h3 style="color: var(--primary-color); margin-bottom: 1.5rem;">Maintenance History</h3>

                    <div class="log-entry">
                        <div>
                            <div class="log-date">Jan 10, 2025</div>
                            <div>Pre-trip inspection completed</div>
                        </div>
                        <span class="status-badge status-confirmed">Completed</span>
                    </div>

                    <div class="log-entry">
                        <div>
                            <div class="log-date">Jan 5, 2025</div>
                            <div>Fuel tank refilled - 80L diesel</div>
                        </div>
                        <span class="status-badge status-confirmed">Completed</span>
                    </div>

                    <div class="log-entry">
                        <div>
                            <div class="log-date">Dec 15, 2024</div>
                            <div>Regular service - Oil change, filter replacement</div>
                        </div>
                        <span class="status-badge status-confirmed">Completed</span>
                    </div>

                    <div class="log-entry">
                        <div>
                            <div class="log-date">Dec 10, 2024</div>
                            <div>Tire rotation and alignment</div>
                        </div>
                        <span class="status-badge status-confirmed">Completed</span>
                    </div>

                    <div class="log-entry">
                        <div>
                            <div class="log-date">Nov 20, 2024</div>
                            <div>Brake inspection and cleaning</div>
                        </div>
                        <span class="status-badge status-confirmed">Completed</span>
                    </div>
                </div>

                <div style="margin-top: 2rem;">
                    <h4 style="color: var(--primary-color); margin-bottom: 1rem;">Upcoming Maintenance</h4>
                    <div class="vehicle-card">
                        <div class="log-entry">
                            <div>
                                <div class="log-date">Feb 15, 2025</div>
                                <div>Scheduled service - 50,000 km service</div>
                            </div>
                            <span class="status-badge status-pending">Scheduled</span>
                        </div>

                        <div class="log-entry">
                            <div>
                                <div class="log-date">Mar 1, 2025</div>
                                <div>Annual safety inspection</div>
                            </div>
                            <span class="status-badge status-pending">Scheduled</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Feedback Section -->
            <section class="content-section" id="feedback">
                <div class="section-header">
                    <h2 class="section-title">Customer Feedback</h2>
                </div>

                <div class="feedback-summary">
                    <h3 style="color: var(--primary-color); margin-bottom: 1.5rem;">Performance Summary</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 2rem; margin-bottom: 2rem;">
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; color: var(--primary-color); font-weight: 700;">4.6</div>
                            <div>Overall Rating</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; color: var(--primary-color); font-weight: 700;">203</div>
                            <div>Total Reviews</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; color: var(--primary-color); font-weight: 700;">87%</div>
                            <div>5-Star Reviews</div>
                        </div>
                        <div style="text-align: center;">
                            <div style="font-size: 2rem; color: var(--primary-color); font-weight: 700;">18</div>
                            <div>This Month</div>
                        </div>
                    </div>
                </div>

                <div id="driverFeedbackList">
                    <!-- Feedback items will be loaded here -->
                </div>
            </section>

            <!-- Profile Section -->
            <section class="content-section" id="profile">
                <div class="section-header">
                    <h2 class="section-title">Driver Profile</h2>
                </div>

                <div class="profile-form">
                    <form id="driverProfileForm">
                        <div class="form-section">
                            <h3>Personal Information</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">First Name</label>
                                    <input type="text" class="form-control" id="profileFirstName" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Last Name</label>
                                    <input type="text" class="form-control" id="profileLastName" required>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Email</label>
                                    <input type="email" class="form-control" id="profileEmail" required>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Phone</label>
                                    <input type="tel" class="form-control" id="profilePhone" required>
                                </div>
                            </div>
                        </div>

                        <div class="form-section">
                            <h3>Professional Information</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Years of Experience</label>
                                    <input type="number" class="form-control" id="experience" min="1" max="50">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Employee ID</label>
                                    <input type="text" class="form-control" id="employeeId" readonly>
                                </div>
                            </div>

                            <div class="license-info">
                                <h4 style="color: var(--primary-color); margin-bottom: 1rem;">License Information</h4>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Driving License Number</label>
                                        <input type="text" class="form-control" id="licenseNumber">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">License Expiry Date</label>
                                        <input type="date" class="form-control" id="licenseExpiry">
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Commercial License</label>
                                        <input type="text" class="form-control" id="commercialLicense">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Commercial Expiry</label>
                                        <input type="date" class="form-control" id="commercialExpiry">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="form-section">
                            <h3>Emergency Contact</h3>
                            <div class="emergency-contact">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Emergency Contact Name</label>
                                        <input type="text" class="form-control" id="emergencyName">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Emergency Contact Phone</label>
                                        <input type="tel" class="form-control" id="emergencyPhone">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Relationship</label>
                                    <input type="text" class="form-control" id="emergencyRelationship">
                                </div>
                            </div>
                        </div>

                        <button type="submit" class="btn btn-primary">
                            Update Profile
                        </button>
                    </form>
                </div>
            </section>
        </main>
    </div>

    <script src="../js/main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Check authentication and driver role
            if (!SafariApp.Auth.isAuthenticated() || SafariApp.Auth.getUserRole() !== 'DRIVER') {
                window.location.href = '../login.html';
                return;
            }

            // Initialize driver dashboard
            initDriverDashboard();
            loadDriverData();
            loadTrips();
            loadDriverFeedback();

            // Menu navigation
            document.querySelectorAll('.menu-item').forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    const section = this.dataset.section;
                    showSection(section);

                    // Update active menu item
                    document.querySelectorAll('.menu-item').forEach(mi => mi.classList.remove('active'));
                    this.classList.add('active');
                });
            });
        });

        function initDriverDashboard() {
            // Load driver statistics
            loadDriverStats();
        }

        function loadDriverStats() {
            // Mock data for demonstration
            const stats = {
                todaysTrips: 2,
                weeklyTrips: 7,
                recentRating: 4.8,
                safetyDays: 365
            };

            Object.keys(stats).forEach(key => {
                const element = document.getElementById(key);
                if (element) {
                    element.textContent = stats[key];
                }
            });
        }

        function loadDriverData() {
            // Mock driver data
            const driverData = {
                firstName: 'Nimal',
                lastName: 'Silva',
                email: 'nimal@ranwelisafari.com',
                phone: '+94 77 987 6543',
                experience: 5,
                employeeId: 'DRV-001',
                rating: 4.6,
                totalTrips: 203,
                safetyRecord: 100
            };

            // Update profile form
            document.getElementById('profileFirstName').value = driverData.firstName;
            document.getElementById('profileLastName').value = driverData.lastName;
            document.getElementById('profileEmail').value = driverData.email;
            document.getElementById('profilePhone').value = driverData.phone;
            document.getElementById('experience').value = driverData.experience;
            document.getElementById('employeeId').value = driverData.employeeId;

            document.getElementById('welcomeName').textContent = driverData.firstName;
        }

        function loadTrips() {
            // Mock trip data
            const trips = [
                {
                    id: 'RNW-2025-001234',
                    customerName: 'John Smith',
                    package: 'Morning Safari',
                    date: '2025-01-15',
                    time: '06:00',
                    participants: 2,
                    guideName: 'Kumara Perera',
                    status: 'CONFIRMED',
                    pickupLocation: 'Tissamaharama Hotel',
                    duration: '3 hours'
                },
                {
                    id: 'RNW-2025-001235',
                    customerName: 'Emma Johnson',
                    package: 'Evening Safari',
                    date: '2025-01-15',
                    time: '15:30',
                    participants: 4,
                    guideName: 'Priya Fernando',
                    status: 'CONFIRMED',
                    pickupLocation: 'Cinnamon Wild',
                    duration: '3 hours'
                }
            ];

            displayTrips(trips, 'todaysTripsList');
            displayTrips(trips, 'allTrips');
        }

        function displayTrips(trips, containerId) {
            const container = document.getElementById(containerId);

            if (trips.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 3rem; color: var(--text-light);">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">🚗</div>
                        <h3>No trips scheduled</h3>
                        <p>Check back for upcoming assignments.</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = trips.map(trip => `
                <div class="trip-card">
                    <div class="trip-header">
                        <div>
                            <h4 style="color: var(--primary-color); margin-bottom: 0.5rem;">${trip.package}</h4>
                            <p style="color: var(--text-light); font-size: 0.9rem;">Trip: ${trip.id}</p>
                        </div>
                        <div class="status-badge status-${trip.status.toLowerCase()}">${trip.status}</div>
                    </div>

                    <div class="trip-details">
                        <div class="detail-item">
                            <span class="detail-icon">👥</span>
                            <span>Customer: ${trip.customerName}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-icon">📅</span>
                            <span>${SafariApp.formatDate(trip.date)}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-icon">🕐</span>
                            <span>${trip.time} (${trip.duration})</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-icon">👨‍👩‍👧‍👦</span>
                            <span>${trip.participants} passengers</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-icon">🧭</span>
                            <span>Guide: ${trip.guideName}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-icon">📍</span>
                            <span>Pickup: ${trip.pickupLocation}</span>
                        </div>
                    </div>

                    <div class="trip-actions">
                        <button class="btn btn-primary btn-sm" onclick="viewTripDetails('${trip.id}')">View Details</button>
                        <button class="btn btn-outline btn-sm" onclick="contactGuide('${trip.id}')">Contact Guide</button>
                        <button class="btn btn-sm" style="background: var(--secondary-color); color: white;" onclick="startTrip('${trip.id}')">Start Trip</button>
                    </div>
                </div>
            `).join('');
        }

        function loadDriverFeedback() {
            // Mock feedback data for driver
            const feedbackData = [
                {
                    id: 1,
                    customerName: 'John Smith',
                    rating: 4,
                    date: '2025-01-12',
                    feedback: 'Good driver, felt safe throughout the journey. Vehicle was comfortable and clean. Could improve on route knowledge.',
                    highlights: 'Safe driving, clean vehicle, comfortable ride'
                },
                {
                    id: 2,
                    customerName: 'Emma Johnson',
                    rating: 5,
                    date: '2025-01-10',
                    feedback: 'Excellent driver! Very skilled at navigating rough terrain. Vehicle was in perfect condition and he was very professional.',
                    highlights: 'Skilled driving, professional, well-maintained vehicle'
                },
                {
                    id: 3,
                    customerName: 'Michael Chen',
                    rating: 5,
                    date: '2025-01-08',
                    feedback: 'Outstanding! Nimal positioned the vehicle perfectly for photography and was very patient. Great knowledge of animal behavior.',
                    highlights: 'Photography positioning, patience, animal knowledge'
                }
            ];

            displayDriverFeedback(feedbackData);
        }

        function displayDriverFeedback(feedbackData) {
            const container = document.getElementById('driverFeedbackList');

            container.innerHTML = feedbackData.map(feedback => `
                <div class="feedback-item">
                    <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 1rem;">
                        <div>
                            <h4 style="color: var(--primary-color); margin-bottom: 0.5rem;">${feedback.customerName}</h4>
                            <p style="color: var(--text-light); font-size: 0.9rem;">${SafariApp.formatDate(feedback.date)}</p>
                        </div>
                        <div class="rating-display">
                            <div class="rating-stars">
                                ${generateStars(feedback.rating)}
                            </div>
                            <span style="font-weight: 600; color: var(--primary-color);">${feedback.rating}/5</span>
                        </div>
                    </div>

                    <p style="font-style: italic; margin: 1rem 0; color: var(--text-color);">"${feedback.feedback}"</p>

                    <div style="background: white; padding: 1rem; border-radius: 8px; margin-top: 1rem;">
                        <strong style="color: var(--primary-color);">Highlights:</strong> ${feedback.highlights}
                    </div>
                </div>
            `).join('');
        }

        function generateStars(rating) {
            let stars = '';
            for (let i = 1; i <= 5; i++) {
                stars += `<span class="rating-star">${i <= rating ? '★' : '☆'}</span>`;
            }
            return stars;
        }

        function showSection(sectionId) {
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(sectionId).classList.add('active');
        }

        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('active');
        }

        function logout() {
            SafariApp.Auth.logout();
        }

        // Mock functions for driver actions
        function viewTripDetails(id) {
            SafariApp.Notifications.info(`Viewing trip details for ${id} - Feature coming soon!`);
        }

        function contactGuide(id) {
            SafariApp.Notifications.info(`Contacting guide for trip ${id} - Feature coming soon!`);
        }

        function startTrip(id) {
            SafariApp.Notifications.success(`Starting trip ${id}!`);
        }

        function reportIssue() {
            SafariApp.Notifications.info('Vehicle issue reporting - Feature coming soon!');
        }

        function requestMaintenance() {
            SafariApp.Notifications.info('Maintenance request - Feature coming soon!');
        }

        function addMaintenanceEntry() {
            SafariApp.Notifications.info('Add maintenance entry - Feature coming soon!');
        }
    </script>
</body>
</html>

